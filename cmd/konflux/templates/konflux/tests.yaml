---
apiVersion: appstudio.redhat.com/v1beta2
kind: IntegrationTestScenario
metadata:
  name: {{hyphenize .Name}}-{{hyphenize .Version.Version}}-enterprise-contract
spec:
  application: {{hyphenize .Name}}-{{hyphenize .Version.Version}}
  contexts:
    - description: execute the integration test for a Snapshot of the `component` type
      name: component
  params:
    - name: POLICY_CONFIGURATION
      value: {{- if  not (contains .Name "index") }} tekton-ecosystem-tenant/tekton-ecosystem-tenant-containers {{- else}} tekton-ecosystem-tenant/tekton-ecosystem-tenant-indexes {{- end}}
    - name: TIMEOUT
      value: "15m0s"
    - name: SINGLE_COMPONENT
      value: "true"
  resolverRef:
    params:
      - name: url
        value: "https://github.com/konflux-ci/build-definitions"
      - name: revision
        value: main
      - name: pathInRepo
        value: pipelines/enterprise-contract.yaml
    resolver: git
